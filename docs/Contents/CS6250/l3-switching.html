
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Switching · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../Git/" />
    
    
    <link rel="prev" href="l2-architecture-and-principles.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Intro
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../JavaScript/">
            
                <a href="../JavaScript/">
            
                    
                    JavaScript
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../JavaScript/es6-basics.html">
            
                <a href="../JavaScript/es6-basics.html">
            
                    
                    ES6 Basics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../JavaScript/__proto__-vs-prototype.html">
            
                <a href="../JavaScript/__proto__-vs-prototype.html">
            
                    
                    proto VS prototype
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../JavaScript/const-and-immutable-array.html">
            
                <a href="../JavaScript/const-and-immutable-array.html">
            
                    
                    Const statement and immutable array
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../javascript/isNaN-and-isArray.html">
            
                <a href="../javascript/isNaN-and-isArray.html">
            
                    
                    isNaN and isArray
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../JavaScript/javascript-asynchronous.html">
            
                <a href="../JavaScript/javascript-asynchronous.html">
            
                    
                    Asynchronous
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../JavaScript/let-and-closure.html">
            
                <a href="../JavaScript/let-and-closure.html">
            
                    
                    Let statement and closure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="../JavaScript/array-methods.html">
            
                <a href="../JavaScript/array-methods.html">
            
                    
                    Array Methods
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.8" data-path="../JavaScript/numbers-and-parseInt.html">
            
                <a href="../JavaScript/numbers-and-parseInt.html">
            
                    
                    numbers() and parseInt()
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../CS/">
            
                <a href="../CS/">
            
                    
                    CS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../CS/logic-gate-endians.html">
            
                <a href="../CS/logic-gate-endians.html">
            
                    
                    Logic gate endians
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../CS/logic-gate-basics.html">
            
                <a href="../CS/logic-gate-basics.html">
            
                    
                    Logic gate basics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../CS/network-basics.html">
            
                <a href="../CS/network-basics.html">
            
                    
                    Network basics
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="./">
            
                <a href="./">
            
                    
                    CS6250
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="l2-architecture-and-principles.html">
            
                <a href="l2-architecture-and-principles.html">
            
                    
                    Architecture and Principles
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.4.2" data-path="l3-switching.html">
            
                <a href="l3-switching.html">
            
                    
                    Switching
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../Git/">
            
                <a href="../Git/">
            
                    
                    Git
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../Git/git_fork_to_pr.html">
            
                <a href="../Git/git_fork_to_pr.html">
            
                    
                    Fork에서 PR
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../Git/git_basics.html">
            
                <a href="../Git/git_basics.html">
            
                    
                    Git Basics
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../DB/">
            
                <a href="../DB/">
            
                    
                    DB/SQL
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../DB/unique-constraint.html">
            
                <a href="../DB/unique-constraint.html">
            
                    
                    Unique 제약
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../DB/auto-timestamp.html">
            
                <a href="../DB/auto-timestamp.html">
            
                    
                    Auto Timestamp
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../DB/mysql-remote-access.html">
            
                <a href="../DB/mysql-remote-access.html">
            
                    
                    MySQL 외부접속
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../Other/">
            
                <a href="../Other/">
            
                    
                    Other
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../Other/is_it_rest.html">
            
                <a href="../Other/is_it_rest.html">
            
                    
                    "그런 REST API로 괜찮은가"를 보고
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../Other/socket.io.html">
            
                <a href="../Other/socket.io.html">
            
                    
                    Socket.io server cheatsheet
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Switching</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="computer-networking---lesson-3-switching">Computer Networking - Lesson 3 Switching</h1>
<h2 id="1-lesson-3-intro">1 Lesson 3 Intro</h2>
<ul>
<li><p>At its core, a network serves to route packets between machines on the network in complicated but quire fascinating way.</p>
</li>
<li><p>Packets  likely traveled across at least four or five networks, if not more.</p>
</li>
</ul>
<h2 id="2-switching-and-bridging">2 Switching and Bridging</h2>
<ul>
<li>Problems<ul>
<li>How hosts find each other on a subnet</li>
<li>How subnets are interconnected</li>
</ul>
</li>
<li>Also<ul>
<li>switches vs hubs</li>
<li>swithces vs routers</li>
</ul>
</li>
<li>How to scale Ethernet</li>
</ul>
<h2 id="3-bootstrapping-network-two-hosts">3 Bootstrapping: Network Two Hosts</h2>
<p>Case:</p>
<ul>
<li>Host 1 and Host 2 are interconnected by two ethernet adapters or network interfaces.</li>
<li>Each has LAN/MAC/Physical Address</li>
<li>Host 1 wants to send datagram to host 2.</li>
<li>This can be done by sending frame to a broadcast destination MAC address - which means that the datagram would be send to every host in LAN.</li>
<li>Typically a host knows a DNS name or an IP address but may not know the hardware or MAC address of an another host.</li>
<li>We need to provide a way for a host to learn the MAC address of another -&gt; <strong>ARP (Address Resolution Protocol)</strong></li>
</ul>
<h2 id="4-arp-address-resolution-protocol">4 ARP: Address Resolution Protocol</h2>
<ul>
<li>Host queries with an IP address: &quot;who has IP address 130.207.23.48&quot;?</li>
<li>The host who has that IP address will respond its MAC address.</li>
</ul>
<blockquote>
<p>ARP Query is a broadcast that goes to every host on the LAN, and response is a unicast response with the MAC address as the answer.</p>
</blockquote>
<ul>
<li>The host receives a reply starts to build ARP table. ARP table includes map of IP address and MAC address.</li>
<li>The host that sends the packet prepares a packet that contains destination ip address, and encapsulate that packet by Ethernet frame that contains destination MAC address. that MAC address comes from its local ARP table.</li>
</ul>
<h2 id="5-quiz-arp-quiz">5 Quiz: ARP Quiz</h2>
<ul>
<li>Query : Broadcast asking about IP</li>
<li>Response : Unitcast with MAC address</li>
</ul>
<h2 id="6-interconnecting-lans-with-hubs">6 Interconnecting LANs with Hubs</h2>
<ul>
<li>The simplest way that a LAN can be connected is with something called hub.</li>
<li><p>These days, hubs don&apos;t exist because you can build a switch for essentially the same price</p>
</li>
<li><p>Hub: Broadcast medium</p>
<ul>
<li>a host sends a frame that&apos;s destined for some other host on the LAN, then a hub will simply boradcast the frame to every outgoing port.</li>
<li>All packets are seen everywhere.</li>
<li>A lot of flooding</li>
<li>collision of frames -&gt; latency</li>
<li>failures / misconfiguration<ul>
<li>one misconfigured host can cause a lot of unwanted traffic</li>
<li>may need some amount of isolation</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="7-switchies-traffic-isolation">7 Switchies: Traffic Isolation</h2>
<ul>
<li><p>switch provides some amount of isolation.</p>
</li>
<li><p>Imagine each of three hubs has three hosts and all of the hubs are connected to a switch.</p>
</li>
<li>If one host wants to send a frame to another host in same hub, then the hub broadcasts the frame but <em>*the switch knows that destination host is within the hub, so does not send the frame</em> to other hubs.</li>
<li>To allow above, <strong>switch requires switch table</strong> -&gt; maps destination MAC to output port</li>
</ul>
<h2 id="8-learning-switches">8 Learning Switches</h2>
<ul>
<li>learning switches maintains a table of destination and port.</li>
<li>A sends to C.</li>
<li>If no entry in forwarding table =&gt; flood</li>
<li>Now switch knows that sender A has port 1, so records it to the table.</li>
<li>After flood, when C replies, the switch records C&apos;s port number.</li>
</ul>
<h3 id="when-there-is-cycle-in-topology">when there is cycle in topology</h3>
<ul>
<li>causes loops</li>
<li>causes Broadcast storms<blockquote>
<p>Therefore, switch needs some kinds of protocol to create a logical forwarding tree on top of the underlying physical topology</p>
</blockquote>
</li>
</ul>
<h2 id="9-quiz-learning-switches-quiz">9 Quiz: Learning Switches Quiz</h2>
<p>When switch table is empty and one host wants to send a frame, a switch records that requester and requester&apos;s port in the table for future forwarding.</p>
<h2 id="10-spanning-tree">10 Spanning Tree</h2>
<ul>
<li>Allow loop-free forwarding on a topology that may contain cycles.</li>
<li>Switches pickout spanning tree edges from topology that will assures loop-free forwarding. Switches wont&apos; forward to edges that are not member of spanning tree.<h3 id="construct-spanning-tree">Construct Spanning Tree</h3>
</li>
<li>Elect a root(e.g. switch with smallest ID)</li>
<li>At each switch: exclude link if not on shortest path to root.</li>
</ul>
<blockquote>
<p>Initially: every node thinks it is the root. </p>
<ol>
<li>update view of root</li>
<li>compute distance to new root</li>
</ol>
</blockquote>
<h2 id="11-spanning-tree-example">11 Spanning Tree Example</h2>
<p>Format : (Y, d, X)</p>
<ul>
<li>X : orogin</li>
<li>d : distance</li>
<li>Y : claimed root</li>
</ul>
<p>Initially : every switch in the network broadcast a message &quot;(X, 0, X)&quot; to indicate  it thinks itself is the root.</p>
<ul>
<li>When other switches hear this message, they compare the ID of the sender to their own ID, and they update their opinion of who the root is based on the comparison of this ID.</li>
</ul>
<h2 id="12-switches-vs-routers">12 Switches VS Routers</h2>
<ul>
<li>switch (Layer 2 / &quot;ethernet&quot;)<ul>
<li>Auto-configuring</li>
<li>forwarding tends to be fast</li>
</ul>
</li>
<li>Router (Layer 3 / IP)<ul>
<li>Not restricted to spanning tree</li>
</ul>
</li>
</ul>
<blockquote>
<p>Major limitation of Layer 2 is broadcast and ARP queries are pretty heavy load on the network.</p>
<p>SDN(Software Defined Network) blurs the boundary between layer 2 and 3 which will be covered in the future.</p>
</blockquote>
<h2 id="13-buffer-sizing">13 Buffer Sizing</h2>
<ul>
<li><p>Question : How much buffering do routers/switches need?</p>
</li>
<li><p>Let&apos;s say round-trip propagation delay is 2T and the capacity to bottleneck link is C.</p>
<ul>
<li>Rule of Thumb</li>
<li>Buffer = 2T * C</li>
</ul>
</li>
<li><p>However a router in a typical backbone network has more than 20,000 flows. </p>
</li>
<li>And it turns out that this rule of thumb only really holds if all of the those 20,000 flows are perfectly synchronized. </li>
<li>If the flows are desynchronized, then it turns out that this router can get away, with much less buffering.</li>
<li>instead of the required buffering, needing to be <code>2T * C</code>, we can get away with much less buffering, in particular, <code>2T * C / (N)^(1/2)</code>, where N is the number of flows, passing through the router.</li>
</ul>
<hr>
<h2 id="14-buffer-sizing-for-a-tcp-sender">14 Buffer Sizing for a TCP Sender</h2>
<ul>
<li>If TCP flows are synchronized, the dynamics of the aggregate window as shown in the upper part of the graph, would have the same dynamics as any individual flow.</li>
<li>The quantities on the Y axis here would simply be different. </li>
<li>Specifically, the number of pockets occupying the buffer would be the sum of all of the TCP flows windows, rather than the window of any individual flow.</li>
<li>Now if there are only a small number of flows in the network then these flows may tend to stay synchronized, and the aggregate dynamics might mimic the dynamics of any single flow, as shown. </li>
<li>But as the network supports an increasingly large number of flows, these individual TCP flows become de-synchronized. </li>
<li>So instead of all of the flows lining up with the saw tooth as shown in the bottom part, individual flows might see peaks at different times. </li>
<li>As a result, instead of seeing a huge saw tooth that&apos;s the sum of a bunch of synchronized flows, the aggregate instead might look quite a bit more smooth, as a result of the individual flows being desynchronized. </li>
<li>And we can represent this sum, which is the buffer occupancy, as a random variable. </li>
<li>At any given time, it&apos;s going to take a particular range of values. </li>
<li>The range of values that this buffer occupancy takes can actually be analyzed in terms of the central limit theorem.</li>
</ul>
<h2 id="15-if-tcp-flows-are-synchronized">15 If TCP Flows are Synchronized</h2>
<ul>
<li>The central limit theorem tells us that the more variables that we have, and, in this case the number of variables are the number of unique congestion windows of flows that we have, the narrower the Gaussian will be. </li>
<li>In this case, the Gaussian is the fluctuation of the sum of all of the congestion windows. </li>
<li>In fact, the width decreases as 1 over root N, where N is the number of unique, congestion windows of flows that we have. </li>
<li>And therefore, instead of the required buffering, needing to be 2T times C, we can get away with much less buffering, in particular, 2T times C divided by the square root of N, where N, is the number of flows, passing through the router.</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="l2-architecture-and-principles.html" class="navigation navigation-prev " aria-label="Previous page: Architecture and Principles">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../Git/" class="navigation navigation-next " aria-label="Next page: Git">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Switching","level":"1.4.2","depth":2,"next":{"title":"Git","level":"1.5","depth":1,"path":"Contents/Git/README.md","ref":"Contents/Git/README.md","articles":[{"title":"Fork에서 PR","level":"1.5.1","depth":2,"path":"Contents/Git/git_fork_to_pr.md","ref":"Contents/Git/git_fork_to_pr.md","articles":[]},{"title":"Git Basics","level":"1.5.2","depth":2,"path":"Contents/Git/git_basics.md","ref":"Contents/Git/git_basics.md","articles":[]}]},"previous":{"title":"Architecture and Principles","level":"1.4.1","depth":2,"path":"Contents/CS6250/l2-architecture-and-principles.md","ref":"Contents/CS6250/l2-architecture-and-principles.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"Contents/CS6250/l3-switching.md","mtime":"2019-09-14T04:36:24.845Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-11-19T00:41:26.713Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

