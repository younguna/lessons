# Network Basics

## 컴퓨터 네트워크 아키텍쳐, 계층(Layer) 패턴

|TCP/IP Layers| OSI 7 Layers|
|---|---|
|Application Layer|Application Layer|
|^|Presentation Layer|
|^|Session Layer|
|Transport Layer|Transport Layer|
|Internet Layer|Network Layer|
|Network Access Layer|Data Link Layer|
|^|Physical Layer|

- 레이어 패턴의 각 계층은 인접한 계층 간의 인터페이스만 알 수 있다.
- 각 계층은 인터페이스를 통해 알려준 정보를 제외하고는 상호 전달ㄷ하는 데이터의 내용이 무엇인지 알지 못한다.

위의 내용을 실제 상황의 예를 들어 생각해 봅시다.
- 3층의 팀은 물건을 박스에 넣어 포장하는 작업을 한 뒤 목적지의 ID를 2층으로 전달 합니다.
- 2층의 팀은 위를 받아서 비닐로 포장한 뒤 목적지 ID를 조회하여 주소태그를 붙이는 작업을  하고 1층으로 전달 할 때 시/도 구분된 박스에 나누어 전달 합니다.
- 1층의 팀은 시/도로 구분된 박스에 있는 물건을 해당 하는 지역구 체인점에 배달하는 작업을 합니다.

만약 위의 시스템을 다른 나라에서 사용한다고 하면 2층팀만 바꾸면 그대로 사용할 수 있습니다. 이것이 바로 레이어 패턴의 핵심입니다. 바로 특정 계층의 기술 변경이 매우 용이해 집니다.
- 유선을 무선으로 바꾼다면 Data Link 게층의 이더넷 기술만 Wifi나 LTE로 바꾸면 됩니다.

> 이런 레이어 패턴의 단점은 다른 계층에서 무엇을 하는 것인지 전혀 모르고 단순히 정해진 인터페이스 대로 내용을 주고 받기만 할 수 있다는 것입니다.

### OSI 7 계층
- 한국어로는 물리, 데이터링크, 네트워크, 전송, 세션, 표현, 응용 계층이라 불리운다.
- 단순히 숫자를 붙여 1-7 계층 이라고도 표현 한다.
- TCP/IP 계층과의 맵핑
    - Network Access Layer -> Physical Layer, Data Link Layer
    - Internet Layer -> Network Layer
    - Transport Layer -> Transport Layer
    - Application Layer -> Application Layer, Presentation Layer, Session Layer
- TCP/IP 계층에서 OSI의 1,2 계층이 합쳐진 이유는 실제 장비들이 합쳐서 나오기 때문이다.
    - 우리가 구매하는 이더넷 랜카드/Wifi 랜카드/블루투스 장비는 물리계층과 데이터 링크 계층이 합쳐져 있다.
    - OSI 1,2계층은 워낙 밀접한 관계가 있기 때문에 둘을 합쳐도 큰 문제가 생기지 않습니다.

#### TCP/IP Transport Layer, Internet Layer (OSI Transport, Network Layer)
- OSI 네트워크 계층에 수 많은 프로토콜이 있지만 TCP를 전송계층에서 사용할 땐 네트워크계층에서는 인터넷 프로토콜(IP)을 사용하는 경우가 많습니다.

#### TCP/IP Application Layer (OSI Application, Presentaion, Session Layer)
- TCP/IP의 응용계층은 OSI의 응용/표현/세션 계층을 합쳐서 표현하였습니다.
    - 응용계층의 대표적인 프로토콜은 HTTP/FTP/SSH등이 있습니다.
    - 하지만 위에는 세션과 표현 계층에서 하는 일이 포함되어 있습니다.
    - 대부분의 응용 계층 프로토콜 설계시 세션과 표현의 명세가 빠지기 힘듭니다.
    - 위의 이유로 하나의 응용 계층으로 합친 것으로 볼 수 있습니다.

#### OSI Physical Layer (TCP/IP Network Access Layer)
- 실제로 물리적인 기능을 하는 계층이다.
- 이 계층에서 중요한 것은 신호이다.
- 물리 계층이 담당하는 것은 아날로그 신호를 디지털로 처리하는 것이다.
- 대표적인 네트워크 장비는 허브(HUB)이다.
- 주소는 없다. 물리적으로 연결된 장비가 통신을 하는 목적지 이다.


#### OSI Data Link Layer (TCP/IP Network Access Layer)
- 본격적으로 데이터를 다루는 계층이다.
- 물리 계층을 이용하여 데이터를 송수신 하는 기능을 가지고 있다.
- 사용하는 데이터 단위는 **"프레임 (frame)"** 이다
- 데이터 링크 계층은 고유의 주소를 가지며 이를 **물리주소** 혹은 **MAC주소**라고 말한다.
- 데이터 링크 계층의 전송 범위는 물리적으로 연결된 이웃 컴퓨터이다(혹은 허브, 스위치).
- 데이터 링크 계층은 이렇게 이웃에게 데이터를 전달하는 것이 모든 임무이며 프레임이 목적지로 전달 되었는지 확인도 하고 오류 체크도 하고 재전송 하기도 한다.
- **데이터링크 계층을 통해 송수신한 데이터는 연결 상에 문제만 없다면 제대로 전달되었는지 확인이 가능하다.**
- 이 계층의 대표적인 장비는 스위치 이다.
    - 스위치는 허브와 생긴 것이 비슷하나 허브와는 달리 스위치는 데이터 링크 계층 장비라 프레임과 주소도 확인할 수 있어서 효율적인 트래픽 관리가 가능하다.


<!--### 정리
- 컴퓨터 네트워크의 계층 패턴은 건물을 쌓아 올리 듯이 층을 나누어져 있다.
- 각 계층은 독립적인 기술을 선택할 수 있도록 서로의 의존성이 낮다.
- 인접하나 계층과의 인터페이스 규약은 지켜야 한다.
- 인접하지 않은 계층은 인터페이스도 정해져 있지 않으므로 무슨 일을 하는지 전혀 알 수 없다.-->